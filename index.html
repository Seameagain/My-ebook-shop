<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>e-Book CookBook1</title>
    <script src="https://js.stripe.com/v3/"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/tiktok-sans" rel="stylesheet">

    <style>
        :root {
            --font-main: 'Prompt', sans-serif;
            --font-number: 'TikTok Sans', sans-serif;
        }

        body { 
            font-family: var(--font-main); 
            background-color: #f0f2f5; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
        }

        .card { 
            background: white; 
            border-radius: 20px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            width: 90%; 
            max-width: 380px; 
            overflow: hidden; 
        }

        .product-img { 
            width: 100%; 
            height: auto; 
            display: block; 
        }

        .info { 
            padding: 30px; 
            text-align: center; 
        }

        h1 { 
            font-size: 1.6rem; 
            color: #222; 
            margin: 0 0 5px; 
            font-weight: 600; 
        }

        .author { 
            color: #777; 
            font-size: 0.9rem; 
            margin-bottom: 20px; 
        }

        .number-font {
            font-family: var(--font-number);
            font-weight: bold;
        }

        .price-container { 
            margin-bottom: 25px; 
        }

        .old-price { 
            text-decoration: line-through; 
            color: #999; 
            font-size: 1.1rem; 
            margin-right: 10px;
        }

        .price { 
            font-size: 2rem; 
            color: #ff3b30; 
            display: inline-block;
        }

        button { 
            background: #000;
            color: white; 
            border: none; 
            padding: 18px; 
            border-radius: 15px; 
            font-size: 1.2rem; 
            font-family: var(--font-main);
            font-weight: 600; 
            width: 100%; 
            cursor: pointer; 
            transition: 0.2s;
        }

        button:active { 
            transform: scale(0.96); 
            background: #222;
        }
    </style>
</head>
<body>

    <div class="card">
        <img src="https://payhip.com/cdn-cgi/image/format=auto/https://pe56d.s3.amazonaws.com/o_1jbrqbatnenp1nef5vb1nguoug1g.png" alt="CookBook1" class="product-img">
        
        <div class="info">
            <h1>e-Book CookBook1</h1>
            <p class="author">โดย สีหนาท น้อยทวี</p>
            
            <div class="price-container">
                <span class="old-price">฿<span class="number-font">111</span></span>
                <span class="price">฿<span class="number-font">79</span></span>
            </div>

            <button id="checkout-button">ซื้อเลย</button>
        </div>
    </div>

    <script>
        // ใช้ Public Key ที่คุณให้มา
        const stripe = Stripe('pk_live_51SbjKB5fZuhe4SkNlLVcsEXCK2xxNC8f22dbvJ6nlJySNYBYMpFVR4CMaGujefwtrspyaLAsYjxsh77oQCFOeo2t00wagTBiGi');

        document.getElementById('checkout-button').addEventListener('click', async () => {
            try {
                // เรียกไปที่ API หลังบ้านที่เราจะสร้างใน Vercel
                const response = await fetch('/api/create-checkout-session', { 
                    method: 'POST' 
                });
                const session = await response.json();
                
                if (session.id) {
                    stripe.redirectToCheckout({ sessionId: session.id });
                } else {
                    alert('ไม่สามารถสร้างรายการจ่ายเงินได้ กรุณาลองใหม่');
                }
            } catch (err) {
                console.error(err);
                alert('เกิดข้อผิดพลาดในการเชื่อมต่อ');
            }
        });
    </script>
</body>
</html>
